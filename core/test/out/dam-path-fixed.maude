load dam.maude	---Load files containing the original definitions.

***(
	Generated by STRASS -- Daniel Gal√°n <dagapas@vrain.upv.es>, 2021
)

--- Notice: extended by STRASS, not the original definition
mod DAM-PRED is
	protecting DAM .
	including BOOL .
	protecting EXT-BOOL .
	op openSpillways : Spillways -> Nat .
	eq openSpillways(empty) = 0 .
	eq openSpillways(SC:Spillways[S:SpillwayId, O:Aperture]) = if O:Aperture =/= close then 1 + openSpillways(SC:Spillways) else openSpillways(SC:Spillways) fi .
endm

smod DAM-STRAT is
	protecting DAM .
	protecting DAM-PRED .
	strat Aperture : @ Aperture .
	strat Aperture! : @ Aperture .
	strat Aperture* : @ Aperture .
	strat Aperture+ : @ Aperture .
	strat Aperture-path : @ Aperture .
	strat Aperture-state : @ Aperture .
	strat DamState : @ DamState .
	strat DamState! : @ DamState .
	strat DamState* : @ DamState .
	strat DamState+ : @ DamState .
	strat DamState-path : @ DamState .
	strat DamState-state : @ DamState .
	strat SpillwayId : @ SpillwayId .
	strat SpillwayId! : @ SpillwayId .
	strat SpillwayId* : @ SpillwayId .
	strat SpillwayId+ : @ SpillwayId .
	strat SpillwayId-path : @ SpillwayId .
	strat SpillwayId-state : @ SpillwayId .
	strat Spillways : @ Spillways .
	strat Spillways! : @ Spillways .
	strat Spillways* : @ Spillways .
	strat Spillways+ : @ Spillways .
	strat Spillways-path : @ Spillways .
	strat Spillways-state : @ Spillways .
	strat State : @ State .
	strat State! : @ State .
	strat State* : @ State .
	strat State+ : @ State .
	strat State-path : @ State .
	strat State-state : @ State .
	strat TimeStamp : @ TimeStamp .
	strat TimeStamp! : @ TimeStamp .
	strat TimeStamp* : @ TimeStamp .
	strat TimeStamp+ : @ TimeStamp .
	strat TimeStamp-path : @ TimeStamp .
	strat TimeStamp-state : @ TimeStamp .
	strat a4 : @ State .
	strat f0 : @ State .
	strat f1 : @ State .
	strat f2 : @ State .
	strat f3 : @ State .
	strat f4post : @ State .
	strat f4pre : @ State .
	sd Aperture := (Aperture-path) ; (Aperture-state) .
	sd Aperture! := (all) ! .
	sd Aperture* := (all) * .
	sd Aperture+ := (all) + .
	sd Aperture-path := idle .
	sd Aperture-state := idle .
	sd DamState := (DamState-path) ; (DamState-state) .
	sd DamState! := (all) ! .
	sd DamState* := (all) * .
	sd DamState+ := (all) + .
	sd DamState-path := idle .
	sd DamState-state := idle .
	sd SpillwayId := (SpillwayId-path) ; (SpillwayId-state) .
	sd SpillwayId! := (all) ! .
	sd SpillwayId* := (all) * .
	sd SpillwayId+ := (all) + .
	sd SpillwayId-path := idle .
	sd SpillwayId-state := idle .
	sd Spillways := (Spillways-path) ; (Spillways-state) .
	sd Spillways! := (all) ! .
	sd Spillways* := (all) * .
	sd Spillways+ := (all) + .
	sd Spillways-path := idle .
	sd Spillways-state := idle .
	sd State := (State-path) ; (State-state) .
	sd State! := (State) ; (((all) ; (State)) !) .
	sd State* := (State) ; (((all) ; (State)) *) .
	sd State+ := (State) ; (((all) ; (State)) +) .
	sd State-path := a4 .
	sd State-state := (f0) ; ((f1) ; ((f2) ; (f3))) .
	sd TimeStamp := (TimeStamp-path) ; (TimeStamp-state) .
	sd TimeStamp! := (all) ! .
	sd TimeStamp* := (all) * .
	sd TimeStamp+ := (all) + .
	sd TimeStamp-path := idle .
	sd TimeStamp-state := idle .
	sd a4 := (f4pre) ? ((((volume) ; (State-state)) *) ; (f4post)) : (idle) .
	sd f0 := not(amatch {SC:Spillways ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat < 50000000 = false) .
	sd f1 := not(amatch {[S1:SpillwayId, O1:Aperture][S2:SpillwayId, O2:Aperture][S3:SpillwayId, O3:Aperture] ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat > 40000000 implies O1:Aperture == open3 and O2:Aperture =/= close and O3:Aperture =/= close or O2:Aperture == open3 and O1:Aperture =/= close and O3:Aperture =/= close or O3:Aperture == open3 and O1:Aperture =/= close and O2:Aperture =/= close = false) .
	sd f2 := not(amatch {SC:Spillways ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat < 10000000 implies openSpillways(SC:Spillways) == 0 = false) .
	sd f3 := not(amatch {SC:Spillways ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat >= 10000000 and V:Rat <= 40000000 implies openSpillways(SC:Spillways) == 2 = false) .
	sd f4post := not(amatch {SC:Spillways ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat > 1000 = false) .
	sd f4pre := not(amatch {SC:Spillways ; V:Rat ; T:TimeStamp ; AC:Bool} s.t. V:Rat < 100 = false) .
endsm
